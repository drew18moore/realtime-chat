global
    daemon
    maxconn 256

defaults
    mode http
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms

frontend http-in
    bind *:8080
    default_backend servers

backend servers
    balance roundrobin
    option http-server-close
    option forwardfor

    # WebSocket support â€” keep these to support upgrades (do NOT force server selection here)
    acl is_websocket hdr(Upgrade) -i WebSocket
    acl is_websocket hdr_beg(Host) -i ws

    # Sticky sessions via cookie
    cookie SERVERID insert indirect nocache

    server srv1 server_1:3000 check cookie s1
    server srv2 server_2:3000 check cookie s2
    server srv3 server_3:3000 check cookie s3
